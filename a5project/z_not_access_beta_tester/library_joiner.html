<!DOCTYPE html>
<html lang="en">
<head>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KomiqinAja | a5</title>

    <!-- ------------------------ favicon ------------------------ -->
    <link rel="shortcut icon" href="library/assets/img/favicon.png" type="image/x-icon">
    
    <!-- ------------------------ remixicon ------------------------ -->
    <link href="https://cdn.jsdelivr.net/npm/remixicon@2.5.0/fonts/remixicon.css" rel="stylesheet">
    
    <!-- ------------------------ swiper.css ------------------------ -->
    <link rel="stylesheet" href="library/assets/css/swiper-bundle.min.css">

    <!-- ------------------------ style.css ------------------------ -->
    <link rel="stylesheet" href="library/assets/css/style.css">

    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">

</head>

<body>
    <!-- ------------------------ Header------------------------ -->
    <header class="header" id="header">
        <nav class="nav container">
            <a href="#" class="nav__logo">Suikanime</a>
            <div class="nav__menu" id="nav-menu">
                <ul class="nav__list">
                    <li class="nav__item">
                        <a href="#emision" class="nav__link active-link">Seasonal</a>
                    </li>
                    <li class="nav__item">
                        <a href="#popular" class="nav__link">Popular</a>
                    </li>
                    <li class="nav__item">
                        <a href="#news" class="nav__link">News</a>
                    </li>
                    <form action="" method="get" class="form">
                        <input type="search" placeholder="Search anime..." class="seach__button">
                        <i class="ri-search-line icon-search"></i>
                    </form>
                </ul>

                <div class="nav__close" id="nav-close">
                    <i class="ri-close-line"></i>
                </div>
            </div>

            <!-- Toggle button -->
            <div class="nav__toggle" id="nav-toggle">
                <i class="ri-menu-line"></i>
            </div>
        </nav>
    </header>

    <main class="main">
        <!-- ------------------------ Auto Fill Manga ------------------------ -->
        <section class="section emision" id="emision">
            <div class="section__title">
                <h1>TOP MANGA</h1>
                <span class="line"></span>
                <p>100 animes<br>on airing</p>
            </div>
            <div class="anime__grid grid" id="animeon"></div>
        </section>

        <!-- Paging -->
        <div class="row px-3 mb-5 justify-content-center">
            <nav aria-label="Page navigation">
                <ul class="pagination d-flex justify-content-center" id="pagination">
                    <!-- Placeholder for dynamic pagination -->
                </ul>
            </nav>
        </div>

        <!-- ------------------------ Auto Fill Popular ------------------------ -->
        <section class="section popular" id="popular">
            <div class="section__title">
                <h1>Popular</h1>
                <span class="line"></span>
                <p>Top 10 most<br>popular anime</p>
            </div>
            <div class="popular__container swiper">
                <div class="swiper-wrapper" id="animetop"></div>
                <div class="swiper-button-next">
                    <i class="ri-arrow-right-s-line"></i>
                </div>
                <div class="swiper-button-prev">
                    <i class="ri-arrow-left-s-line"></i>
                </div>
            </div>
        </section>

        <!-- ------------------------ Footer ------------------------ -->
    <footer class="section footer">
        <div class="footer__container container grid">
            <div>
                <a href="#" class="footer__logo">Suikanime</a>
                <p class="footer__description">
                    On this website you will find the manga that are <br>
                    currently on the air, the most popular manga <br>
                    and news related to anime and manga.
                </p>
            </div>

            <div class="footer__content">
                <div>
                    <h3 class="footer__title">Menu</h3>
                    <ul class="footer__links">
                        <li>
                            <a href="#" class="footer__link">Home</a>
                        </li>
                        <li>
                            <a href="#emision" class="footer__link">Seasonal</a>
                        </li>
                        <li>
                            <a href="#popular" class="footer__link">Popular</a>
                        </li>
                        <li>
                            <a href="#news" class="footer__link">News</a>
                        </li>
                    </ul>
                </div>
                <div>
                    <h3 class="footer__title">Support</h3>
                    <ul class="footer__links">
                        <li>
                            <a href="#" class="footer__link">Terms and Conditions</a>
                        </li>
                        <li>
                            <a href="#" class="footer__link">Privacy Policy</a>
                        </li>
                        <li>
                            <a href="#" class="footer__link">FAQs</a>
                        </li>
                        <li>
                            <a href="#" class="footer__link">About</a>
                        </li>
                    </ul>
                </div>
                <div>
                    <h3 class="footer__title">Social</h3>
                    <ul class="footer__social">
                        <li>
                            <a href="#" class="footer__social-link">
                                <i class="ri-facebook-fill"></i>
                            </a>
                        </li>
                        <li>
                            <a href="#" class="footer__social-link">
                                <i class="ri-instagram-line"></i>
                            </a>
                        </li>
                        <li>
                            <a href="#" class="footer__social-link">
                                <i class="ri-twitter-line"></i>
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="footer__copy">
            <span>&#169 2022 Suikanime</span>
            <span>Website design by @a5</span>
        </div>
    </footer>

    <!-- Bootstrap JS (Optional) -->
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    
    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    
    <!-- ------------------------  Swiper JS ------------------------ -->
    <script src="library/assets/js/swiper-bundle.min.js"></script>
    
    <!-- ------------------------ main.js ------------------------ -->
    <script>
        // Menu show
        const navMenu = document.getElementById('nav-menu');
        const navToggle = document.getElementById('nav-toggle');
        const navClose = document.getElementById('nav-close');
    
        if (navToggle) {
            navToggle.addEventListener('click', () => {
                navMenu.classList.add('show-menu');
            });
        }
    
        if (navClose) {
            navClose.addEventListener('click', () => {
                navMenu.classList.remove('show-menu');
            });
        }
    
        // Remove menu mobile
        const navLinks = document.querySelectorAll('.nav__link');
    
        function linkAction() {
            const navMenu = document.getElementById('nav-menu');
            navMenu.classList.remove('show-menu');
        }
    
        navLinks.forEach(link => {
            link.addEventListener('click', linkAction);
        });
    
        // Scroll sections active link
        function scrollHeader() {
            const header = document.getElementById('header');
            if (this.scrollY >= 50) {
                header.classList.add('scroll-header');
            } else {
                header.classList.remove('scroll-header');
            }
        }
    
        window.addEventListener('scroll', scrollHeader);
    
        // Scroll sections active link
        const sections = document.querySelectorAll('section[id]');
    
        function scrollActive() {
            const scrollY = window.pageYOffset;
    
            sections.forEach(current => {
                const sectionHeight = current.offsetHeight;
                const sectionTop = current.offsetTop - 50;
                const sectionId = current.getAttribute('id');
    
                if (scrollY > sectionTop && scrollY <= sectionTop + sectionHeight) {
                    document.querySelector(`.nav__menu a[href*=${sectionId}]`).classList.add('active-link');
                } else {
                    document.querySelector(`.nav__menu a[href*=${sectionId}]`).classList.remove('active-link');
                }
            });
        }
    
        window.addEventListener('scroll', scrollActive);
    
        // Grap data!
        fetch('output.json')
            .then(response => response.json())
            .then(data => {
                const content = document.getElementById('animeon');
                for (let i = 0; i < 100; i++) {
                    content.innerHTML += `
                        <div class="anime__img">
                            <a href="detail.html?id=${data[i].id}">
                                <div class="image__emision">
                                    <img loading="lazy" src="${data[i].image_path}" alt="${data[i].title} Poster">
                                </div>
                                <div class="anime__img-info">
                                    <h3>${data[i].title}</h3>
                                    <p>${data[i].type}</p>
                                </div>
                            </a>
                        </div>
                    `;
                }
            })
            .catch(err => console.error(err));
    
        fetch('output.json')
            .then(response => response.json())
            .then(data => {
                const content = document.getElementById('animetop');
                for (let i = 0; i < 10; i++) {
                    content.innerHTML += `
                        <div class="anime__top swiper-slide">
                            <a href="detail.html?id=${data[i].id}">
                                <div class="anime__top-img">
                                    <img loading="lazy" src="${data[i].image_path}" alt="${data[i].title} Poster" class="popular__img">
                                </div>
                                <div class="popular__anime-title">
                                    <h2>${data[i].title}</h2>
                                    <p>#${data[i].rank}</p>
                                </div>
                                <div class="popular__anime-subtitle">
                                    <h3>${data[i].status}</h3>
                                    <p>∙</p>
                                    <p>${data[i].type}</p>
                                </div>
                                <p class="popular-anime-description">
                                    ${data[i].sinopsis}
                                </p>
                            </a>
                        </div>
                    `;
                }
            })
            .catch(err => console.error(err));
    
        // Initialize current page
        var currentPage = 1;
        var animePerPage = 100; // Change this to adjust the number of anime per page
        var totalAnime = 0; // Variable to store the total number of anime
    
        // Function to display anime for a given page
        function displayAnime(page) {
            fetch('output.json')
                .then(response => response.json())
                .then(data => {
                    totalAnime = data.length;
                    var startIndex = (page - 1) * animePerPage;
                    var endIndex = Math.min(startIndex + animePerPage, totalAnime);
                    var content = '';
    
                    for (let i = startIndex; i < endIndex; i++) {
                        content += `
                            <div class="anime__img">
                                <a href="detail.html?id=${data[i].id}">
                                    <div class="image__emision">
                                        <img loading="lazy" src="${data[i].image_path}" alt="${data[i].title} Poster">
                                    </div>
                                    <div class="anime__img-info">
                                        <h3>${data[i].title}</h3>
                                        <p>${data[i].type}</p>
                                    </div>
                                </a>
                            </div>
                        `;
                    }
    
                    const animeContainer = document.getElementById('animeon');
                    animeContainer.innerHTML = content;
    
                    updatePagination();
                })
                .catch(err => console.error(err));
        }
    
        // Function to update pagination based on current page and total anime
        function updatePagination() {
            var totalPages = Math.ceil(totalAnime / animePerPage);
            var pagination = document.getElementById('pagination');
            pagination.innerHTML = '';
    
            for (let i = 1; i <= totalPages; i++) {
                var listItem = document.createElement('li');
                listItem.classList.add('page-item');
                if (i === currentPage) {
                    listItem.classList.add('active');
                }
                var link = document.createElement('a');
                link.classList.add('page-link');
                link.href = '#';
                link.textContent = i;
                listItem.appendChild(link);
                pagination.appendChild(listItem);
            }
        }
    
        // Event listener for page number
        document.addEventListener('click', function (event) {
            if (event.target.classList.contains('page-link')) {
                currentPage = parseInt(event.target.textContent);
                displayAnime(currentPage);
            }
        });
    
        // Initial display of anime
        displayAnime(currentPage);    
    </script>
    
</body>

</html>